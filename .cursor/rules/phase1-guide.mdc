---
description: 
globs: 
alwaysApply: false
---
# Phase1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤æ§‹ç¯‰ã‚¬ã‚¤ãƒ‰

## ğŸ¯ Phase1 ã®ç›®æ¨™

- Express.js ã‚µãƒ¼ãƒãƒ¼ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã€åŸºæœ¬ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° & ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å®Ÿè£…ã™ã‚‹
- SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’ç¢ºç«‹ã™ã‚‹
- é–‹ç™ºåŠ¹ç‡åŒ– (nodemon & ESLint) ç’°å¢ƒã‚’æ•´å‚™ã™ã‚‹

å®Œäº†å¾Œã«ã¯ `/api/hello` ãŠã‚ˆã³ `/api/db-test` ãŒå‹•ä½œã—ã€DB ã¸ã®æ¥ç¶šç¢ºèªãŒå‡ºæ¥ã¦ã„ã‚‹çŠ¶æ…‹ã¨ãªã‚Šã¾ã™ã€‚

---

## ğŸ“‹ æˆæœç‰©

1. `backend/server.js` â€“ ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ (PORT 3000)
2. `config/database.js` â€“ SQLite æ¥ç¶šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
3. `package.json` â€“ å¿…è¦ä¾å­˜ (express, sqlite3, cors, nodemon)
4. ã‚µãƒ³ãƒ—ãƒ« API
   - GET `/api/hello` â†’ `{ message: 'Hello World' }`
   - GET `/api/db-test` â†’ ç¾åœ¨æ™‚åˆ»ã‚’ DB ã‹ã‚‰å–å¾—

---

## ğŸš€ å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

### ã‚¹ãƒ†ãƒƒãƒ— 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ç§»å‹•
mkdir -p backend && cd backend

# package.json ã‚’ç”Ÿæˆï¼ˆ-y ã§å…¨ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼‰
npm init -y

# æœ¬ç•ªç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install express sqlite3 cors

# é–‹ç™ºç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -D nodemon eslint
```

#### ğŸ’¡ ãªãœã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦ãªã®ã‹ï¼Ÿ

- **express**: Node.js ã§ Web ã‚µãƒ¼ãƒãƒ¼ã‚’ç°¡å˜ã«ä½œã‚‹ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **sqlite3**: SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **cors**: ç•°ãªã‚‹ãƒãƒ¼ãƒˆé–“ã§ã®é€šä¿¡ã‚’è¨±å¯ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã®é€£æºç”¨ï¼‰
- **nodemon**: ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã«ã‚µãƒ¼ãƒãƒ¼ã‚’è‡ªå‹•å†èµ·å‹•ï¼ˆé–‹ç™ºåŠ¹ç‡å‘ä¸Šï¼‰
- **eslint**: ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ„ãƒ¼ãƒ«

### ã‚¹ãƒ†ãƒƒãƒ— 2: ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

```javascript
// backend/server.js
const express = require('express');
const cors = require('cors');
const db = require('./config/database');

const app = express();

// ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®è¨­å®š
app.use(cors());                      // CORSå¯¾å¿œ
app.use(express.json());              // JSONãƒœãƒ‡ã‚£ã‚’è§£æ

// Hello World ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
app.get('/api/hello', (_req, res) => {
  res.json({ message: 'Hello World' });
});

// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
app.get('/api/db-test', (_req, res) => {
  db.get('SELECT datetime("now") as now', (err, row) => {
    if (err) {
      console.error('Database error:', err);
      return res.status(500).json({ error: 'DB Error' });
    }
    res.json({ now: row.now });
  });
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`ğŸš€ Server running on http://localhost:${PORT}`);
});
```

#### ğŸ’¡ ã‚³ãƒ¼ãƒ‰ã®è§£èª¬

- `require()`: ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã‚€
- `app.use()`: ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆå…±é€šå‡¦ç†ï¼‰ã‚’è¨­å®š
- `app.get()`: GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ãƒ«ãƒ¼ãƒˆã‚’å®šç¾©
- `res.json()`: JSON å½¢å¼ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã®å‡¦ç†

### ã‚¹ãƒ†ãƒƒãƒ— 3: SQLite æ¥ç¶šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
mkdir -p database
```

```javascript
// backend/config/database.js
const sqlite3 = require('sqlite3').verbose();
const path = require('path');

// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’è¨­å®š
const dbPath = path.join(__dirname, '../database/todo.db');

// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¥ç¶š
const db = new sqlite3.Database(dbPath, (err) => {
  if (err) {
    console.error('âŒ DB connection error:', err.message);
  } else {
    console.log('âœ… SQLite connected successfully');
  }
});

module.exports = db;
```

#### ğŸ’¡ SQLite ã«ã¤ã„ã¦

- **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹**: 1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å…¨ä½“
- **è»½é‡**: ã‚µãƒ¼ãƒãƒ¼ä¸è¦ã§å­¦ç¿’ã«æœ€é©
- **SQL**: æ¨™æº–çš„ãª SQL æ–‡æ³•ãŒä½¿ãˆã‚‹

### ã‚¹ãƒ†ãƒƒãƒ— 4: ã‚¹ã‚¯ãƒªãƒ—ãƒˆ & nodemon è¨­å®š

`package.json` ã«ä»¥ä¸‹ã‚’è¿½è¨˜:

```json
{
  "scripts": {
    "dev": "nodemon server.js",
    "start": "node server.js"
  }
}
```

#### ğŸ’¡ npm scripts ã«ã¤ã„ã¦

- `npm run dev`: é–‹ç™ºæ™‚ã«ä½¿ç”¨ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã§è‡ªå‹•å†èµ·å‹•ï¼‰
- `npm start`: æœ¬ç•ªæ™‚ã«ä½¿ç”¨ï¼ˆé€šå¸¸ã®èµ·å‹•ï¼‰

---

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ç’°å¢ƒç¢ºèª
- [ ] Node.js ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ï¼ˆ`node --version`ï¼‰
- [ ] npm ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ï¼ˆ`npm --version`ï¼‰

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆç¢ºèª
- [ ] `backend/server.js` ãŒå­˜åœ¨ã™ã‚‹
- [ ] `backend/config/database.js` ãŒå­˜åœ¨ã™ã‚‹
- [ ] `backend/database/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹
- [ ] `backend/package.json` ã«å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹

### å‹•ä½œç¢ºèª
- [ ] `npm run dev` ã§ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹
- [ ] ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã€ŒğŸš€ Server running on http://localhost:3000ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã€Œâœ… SQLite connected successfullyã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### API ãƒ†ã‚¹ãƒˆ
```bash
# Hello World API ã‚’ãƒ†ã‚¹ãƒˆ
curl http://localhost:3000/api/hello

# æœŸå¾…ã•ã‚Œã‚‹çµæœ: {"message":"Hello World"}

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆ
curl http://localhost:3000/api/db-test

# æœŸå¾…ã•ã‚Œã‚‹çµæœ: {"now":"2024-01-01 12:00:00"}ï¼ˆç¾åœ¨æ™‚åˆ»ï¼‰
```

### ã‚³ãƒ¼ãƒ‰å“è³ªç¢ºèª
- [ ] ESLint ãŒã‚¨ãƒ©ãƒ¼ç„¡ãé€šã‚‹ï¼ˆ`npx eslint server.js`ï¼‰

---

## ğŸ“ å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

### Express.js ã®åŸºæœ¬æ§‹é€ 
```javascript
const app = express();  // â† ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
app.use(ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢);   // â† å…±é€šå‡¦ç†è¨­å®š
app.get(ãƒ«ãƒ¼ãƒˆ, å‡¦ç†);   // â† ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾©
app.listen(ãƒãƒ¼ãƒˆ);     // â† ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®é‡è¦æ€§
```javascript
// âŒ ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ï¼ˆå±é™ºï¼‰
db.get(sql, (err, row) => {
  res.json(row); // errã‚’ãƒã‚§ãƒƒã‚¯ã—ãªã„
});

// âœ… é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
db.get(sql, (err, row) => {
  if (err) {
    console.error(err);
    return res.status(500).json({ error: 'Server Error' });
  }
  res.json(row);
});
```

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã®è€ƒãˆæ–¹
```
backend/
â”œâ”€â”€ server.js          â† ãƒ¡ã‚¤ãƒ³èµ·å‹•ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ config/
â”‚   â””â”€â”€ database.js    â† ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
â”œâ”€â”€ database/
â”‚   â””â”€â”€ todo.db        â† SQLiteãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â””â”€â”€ package.json       â† ä¾å­˜é–¢ä¿‚ç®¡ç†
```

---

## ğŸ”§ ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

### å•é¡Œ1: `Cannot find module 'express'`
**åŸå› **: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„
**è§£æ±º**: `npm install express sqlite3 cors`

### å•é¡Œ2: `EADDRINUSE: address already in use`
**åŸå› **: ãƒãƒ¼ãƒˆ3000ãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
**è§£æ±º**: 
- ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢: `pkill -f "node.*server.js"`
- ã¾ãŸã¯åˆ¥ã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨: `PORT=3001 npm run dev`

### å•é¡Œ3: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œãªã„
**åŸå› **: `database/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„
**è§£æ±º**: `mkdir -p backend/database`

---

## ğŸ‰ Phase1 å®Œäº†å¾Œã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

Phase1 ãŒå®Œäº†ã—ãŸã‚‰ï¼š

1. **å­¦ç¿’è¨˜éŒ²**: ä½•ã‚’å­¦ã‚“ã ã‹ã‚’ãƒ¡ãƒ¢ã«æ®‹ã™
2. **ç†è§£åº¦ãƒã‚§ãƒƒã‚¯**: Express ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åŸºæœ¬æ¦‚å¿µã‚’å¾©ç¿’
3. **Phase2 æº–å‚™**: JWT ã®åŸºç¤çŸ¥è­˜ã‚’äºˆç¿’ï¼ˆæ¬¡å›å…¬é–‹äºˆå®šï¼‰

å®Œäº†ã—ãŸã‚‰ `README.md` ã®é€²æ—ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’ âœ… ã«æ›´æ–°ã—ã¦ãã ã•ã„ï¼

---

<!-- ç·¨é›†ç¦æ­¢: ãƒ¡ã‚¿æƒ…å ± -->
